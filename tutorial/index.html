<!DOCTYPE <html>
<head>
	<title>play-heroku-seed - Activator Seed</title>
</head>
<body>
	<div>
		<h1>The play-heroku-seed has been created!</h1>
		<h2>Getting started</h2>
		<p>
			This application is meant to make it easier to create a Play application with basic Create, Read, Update and Delete functionality and get it up onto Heroku. Database manipulation is handled by Slick connected to PostgreSQL.
		</p>
		<p>
			You can try a deployed instance of the app here:
			<br>
			<a href="http://afternoon-wildwood-5782.herokuapp.com/" target="_blank">https://afternoon-wildwood-5782.herokuapp.com/</a> 
			<br>
			or immediately deploy your own instance on Heroku: 
			<br>
			<a href="https://heroku.com/deploy?template=https://github.com/mkbehbehani/play-heroku-seed" target="_blank"><img src="tutorial/deploy_button.png" style="display:block; margin: 2em auto;"></a>
			<br>
			Please take a look at the GitHub repo as well and contribute:
			<br>
			<a href="https://github.com/mkbehbehani/play-heroku-seed" target="_blank">https://github.com/mkbehbehani/play-heroku-seed</a>
		</p>
		<p>Please continue with the tutorial for database setup, local config and more. </p>
	</div>
	<div>
		<h2>Local PostgreSQL setup</h2>
		<h3>Install PostgreSQL 9.3</h3>
		<ul>
			<li>
				On OSX, Postgres.app is the easiest way: <a href="http://postgresapp.com/">postgresapp.com 
			</li>
			<li>
				<a href="http://www.postgresql.org/docs/9.3/interactive/">PostgreSQL full documentation</a>
			</li>
		</ul>
		<h3>Set up local database</h3>
		<p>
			<ol>
				<li>
					Run: 
					<code>
					 psql 
					</code>
				</li>
				<li>
					Set up a development database, note the underscores: 
					<code> 
					CREATE DATABASE play_heroku_seed;
					</code>
				</li>
				<li>
					Confirm the database has been created by looking at the database list: 
					<code> 
						\l
					</code>
				</li>
			</ol>
		</p>
	</div>
	<div>
		<h2>Run the application</h2>
		<ul>
			<li>
				In the root folder of the repo: 
				<code>
					 activator run
				</code>
			</li>
			<li>
				In a browser, open localhost:9000. 
			</li>
			<li>
				If no folder for <a href="#code/conf/evolutions/default" class="shortcut">conf/evolutions/default</a> exists, do not worry. On first request in browser, slick will automatically inspect the models, and generate a <a href="#code/conf/evolutions/default/1.sql" class="shortcut">1.sql</a> file in <a href="#code/conf/evolutions/default" class="shortcut">conf/evolutions/default</a> This initial file is a complete schema of the application.
			</li>
		</ul>
	</div>
	<div>
		<h2>Common database tasks</h2>
		<h3>Connect to the database in psql</h3>
		<ul>
			<li>
				If you need to connect to the database to inspect it or run sql, in psql: 
				<br>
				<code>
					\c play_heroku_seed;
				</code>  
				<br>
				and if you are currently logged into osx as "johnsmith" you should see:
				<br>
				<code>
					You are now connected to database "play_heroku_seed" as user "johnsmith".
				</code>
			</li>
		</ul>
		<h3>View users created in the user table</h3>
		<ol>
			<li>
				Open psql, connect to the database:
				<br>
				<code>\c play_heroku_seed;</code>
			</li>
			<li>
				View user table data:
				<br>
				<code>SELECT * FROM "user";</code>
			</li>
		</ol>
		<p>
			Note: "user" is also a keyword in PostgreSQL, if you enter this command without quotation marks, it will not select from the play_heroku_seed user table, but instead will output from PostgreSQL's internal database users table and you will get something like this:
			<br>
			<code>
				play_heroku_seed=# SELECT * FROM user;
				<br>
 				current_user
 				<br>
				--------------
				<br>
 				Mashallah
 				<br>
				(1 row)
			</code>
		</p>
	<h3>Reset your local database</h3>
		<ol>
			<li><code>DROP DATABASE play_heroku_seed;</code></li>
			<li><code>CREATE DATABASE play_heroku_seed;</code></li>
			<li>Run the application</li>
		</ol>
	</div>
	<div>
		<h1>Introducing model changes to the database</h1>
		<h2>Modifying application models</h2>
		<p>If you modify the models, and you do not care about current production data (still before launch):</p>
		<ol>
			<li>Stop the application</li>
			<li>Delete <a href="#code/conf/evolutions/default/1.sql" class="shortcut">conf/evolutions/default/1.sql</a></li>
			<li>
				Open psql, reset the database by doing the following:
				<br>
				<code>DROP DATABASE play_heroku_seed;</code> 
				<br>
				<code>CREATE DATABASE play_heroku_seed;</code> 
			</li>
			<li>Run the application, visit localhost:9000</li>
		</ol>
		<p>
			A <a href="#code/conf/evolutions/default/1.sql" class="shortcut">1.sql</a> file reflecting the current state of the application models will be auto-generated by slick, auto-applied by play, and now running. If a 1.sql file was not generated, you have likely introduced a change to the model that slick cannot interpret.
		</p>
		<p>
			Slick is currently unable to generate incremental database evolution files to make those changes. It can only generate a complete snapshot of the application models at any point. If you want to introduce incremental changes to the models, you will need to manually write the SQL database evolutions.
		</p>	
	</div>
	<div>
		<h2>Heroku configuration</h2>
		<h3>Procfile</h3>
		<p>
			The app will run without a <a href="#code/Procfile" class="shortcut">Procfile</a>, as the necessary settings have been put in <a href="#code/conf/application.conf" class="shortcut">conf/application.conf</a>, are read by Heroku's default Procfile settings in the scala buildpack and are applied.
			<br>
			The Procfile is included in this app for reference and best practices. Heroku reads the Procfile and attempts to initialize the app in <a href="#code/build.sbt" class="shortcut">build.sbt</a> with the same name.
		</p>
		<p>
			Procfile:
			<br>
			<code>web: target/universal/stage/bin/play-heroku-seed</code>
			<br>
			build.sbt:
			<br>
			<code>name := """play-heroku-seed"""</code>
		</p>
		<p>
			If you modify the application name in the Procfile, make sure you update the application name in build.sbt. If the names do not match, the web process will fail to start on Heroku.
		</p>
	</div>
</body>
</html>