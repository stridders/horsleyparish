<!-- 1. nv-file-drop="" uploader="{Object}" options="{Object}" filters="{String}" -->
<div nv-file-drop="" uploader="hmc.uploader" filters="queueLimit, customFilter">

    <div class="hm-uploader">
        <div ng-if="!hmc.uploader.isHTML5" class="hm-title">
            <div>News and Events in the Parish of Horsley</div>
        </div>
        <div ng-if="hmc.uploader.isHTML5">
            <div nv-file-drop="" uploader="hmc.uploader" options="{autoUpload: true}">
                <div nv-file-over=""
                     uploader="hmc.uploader"
                     over-class="upl-drop-zone-over"
                     class="upl-drop-zone page-banner hm-title">
                    <div>News and Events in the Parish of Horsley</div>
                </div>
            </div>
            <div ng-if="hmc.showUploader" class="hm-drag-drop">
                <div class="hm-upl-btn">
                    <label for="file-upload">Drag and drop PDF files onto the page title (above), or <b>Click HERE</b> to upload new magazine(s)</label>
                    <input id="file-upload" type="file" nv-file-select="" accept=".pdf" uploader="hmc.uploader" multiple  />
                </div>
            </div>
        </div>


        <div class="text-content flex-container flex-container-row">
            <div class="text-block">
                <br>
                The Horse's Mouth is a free, community magazine distributed to every house in the parish.
                It's published every month (except January and August) and provides villagers with local news
                and information on events.<br>
                The magazine is produced and distributed on a purely voluntary basis. It's published
                by Leopard Press (stroud@leopardpress.com) and costs are 100% funded through advertising
                revenue.
                <br>
            </div>
        </div>
        <div class="text-content flex-container flex-container-row">
            <div class="col-sm-1"></div>
            <div class="col-sm-3">Helen Knuckle</div>
            <div class="col-sm-3">Editor & Distribution</div>
            <div class="col-sm-3">839441</div>
        </div>
        <div class="text-content flex-container flex-container-row">
            <div class="col-sm-1"></div>
            <div class="col-sm-3">Lynn Stride</div>
            <div class="col-sm-3">Publishing & Distribution</div>
            <div class="col-sm-3">833026</div>
        </div>
        <div class="text-content flex-container flex-container-row">
            <div class="col-sm-1"></div>
            <div class="col-sm-3">Mark Carden</div>
            <div class="col-sm-3">Advertising</div>
            <div class="col-sm-3">833425</div>
        </div>
        <div class="text-content flex-container flex-container-row">
            <div class="col-sm-1"></div>
            <div class="col-sm-3">Fiona Eadie</div>
            <div class="col-sm-3">Distribution</div>
            <div class="col-sm-3"></div>
        </div>
        <div class="text-content flex-container flex-container-row">
            <div class="col-sm-1"></div>
            <div class="col-sm-3">David Hale</div>
            <div class="col-sm-3">Distribution</div>
            <div class="col-sm-3"></div>
        </div>
        <div class="text-content flex-container flex-container-row">
            <div class="col-sm-1"></div>
            <div class="col-sm-3">Angie</div>
            <div class="col-sm-3">Distribution</div>
            <div class="col-sm-3"></div>
        </div>
        <!--File uploader facility - only visible if user is logged in and has role: 'HORSES_MOUTH'-->
        <div ng-if="hmc.showUploader && hmc.uploader.queue.length > 0"
             class="upl-container stnd-bg"
             style="height: 300px">

            <div class="flex-60">

                <h3>Files ready to Upload</h3>
                <p>Queue length: {{ hmc.uploader.queue.length }}</p>

                <table class="table upldr-table">
                    <thead>
                    <tr>
                        <th>Name</th>
                        <th ng-show="hmc.uploader.isHTML5">Size</th>
                        <th ng-show="hmc.uploader.isHTML5">Progress</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="item in hmc.uploader.queue">
                        <td>
                            <input class="upl-form-input"
                                   type="text"
                                   name="fileTitle{{$index}}"
                                   id="fileTitle{{$index}}"
                                   ng-model="item.formData[0].fileTitle"/>
                        </td>
                        <td ng-show="hmc.uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>
                        <td ng-show="hmc.uploader.isHTML5">
                            <div class="progress" style="margin-bottom: 0;">
                                <div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
                            </div>
                        </td>
                        <td class="text-center">
                            <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
                            <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                            <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
                        </td>
                        <td nowrap>
                            <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">
                                <span class="glyphicon glyphicon-upload"></span> Upload
                            </button>
                            <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">
                                <span class="glyphicon glyphicon-ban-circle"></span> Cancel
                            </button>
                            <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
                                <span class="glyphicon glyphicon-trash"></span> Remove
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>

            </div>

        </div>
    </div>
    <br>
    <div class="text-content flex-container flex-container-row">
        <h4>Download a Magazine</h4>
    </div>
    <table class="hm-file-list">
        <thead>
            <tr>
                <th></th>
                <th>Issue</th>
                <th>File Size</th>
                <th>Date uploaded</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="doc in hmc.filteredDocs">
                <td flex="20"><a href="{{doc.documentPath}}"><img src="/web/img/ico-pdf.png"></a></td>
                <td flex="50"><a href="{{doc.documentPath}}">{{doc.fileName}}</a></td>
                <td flex="20">{{doc.fileSize/100000 | number:2 }}MB</td>
                <td flex="10">{{doc.uploadDate | date}}</td>
            </tr>
        </tbody>
    </table>

    <div class="text-content flex-container flex-container-row">
        <div ng-if="hmc.totalItems"
             uib-pagination
             total-items="hmc.totalItems"
             ng-model="hmc.currentPage"
             items-per-page="hmc.pageSize"
             max-size="10"
             class="pagination-sm"
             boundary-link-numbers="true"></div>
    </div>


</div>